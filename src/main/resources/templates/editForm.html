<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://org.thymeleaf.extras.springsecurity5.dialect.SpringSecurityDialect5">

<head>
    <meta charset="UTF-8">
    <title>edit form</title>
</head>
<body>
<p>
    Пользователь: <span sec:authentication="name"></span>
    <br><br>
    Роль(и): <span sec:authentication="principal.authorities"></span>
<table border="0">
    <tr>
        <th>
            <form th:action="@{/logout}"
                  method="POST">
                <input type="submit" value="Выйти" />
            </form>
        </th>
        <th>
            <form th:action="@{/home}"
                  method="GET">
                <input type="submit" value="Центральная" />
            </form>
        </th>
    </tr>
</table>
<hr>
<form th:action="@{/edit}" method="POST">
    <table border="1">
       <caption th:text="${user.id}?'Форма редактирования':'Форма создания'">Форма</caption>
        <THEAD>
        <tr>
            <th>Имя</th>
            <th>Логин</th>
            <th>Пароль</th>
            <th>Электронная почта</th>
            <th th:each="role : ${troles}">Роль</th>
        </tr>

        </THEAD>
        <TBODY>
        <tr>
            <input type="hidden" th:field="*{user.id}"/>
            <td><input type="text" th:field="*{user.name}" /></td>
            <td><input type="text" th:field="*{user.login}" /></td>
            <td><input type="password" th:field="*{user.password}" showPassword="false"/></td>
            <td><input type="text" th:field="*{user.email}" /></td>
            <td th:each="role : ${troles}"><input type="checkbox" th:field="*{user.strIdRoles}" th:value="${role.id}" />
                             <label th:text="${role}">Role</label></td>
            <td><input type="submit" value="Сохранить"></td>
        </tr>
        </TBODY>
    </table>
</form>
<hr>

</body>
</html>